---
- name: "shell | Zsh :: installation"
  apt:
    name: zsh
    state: present

- name: "shell | Zsh :: configuration"
  template:
    src: home/.zshrc.j2
    dest: "{{ homedir }}/.zshrc"
    owner: "{{ userid }}"
    group: "{{ groupid }}"
    mode: 0600

- name: "shell | Zsh :: theme"
  template:
    src: home/.p10k.zsh.j2
    dest: "{{ homedir }}/.p10k.zsh"
    owner: "{{ userid }}"
    group: "{{ groupid }}"
    mode: 0600

- name: "shell | Zsh :: custom folder"
  file:
    path: "{{ homedir }}/.zsh.custom"
    state: directory
    owner: "{{ userid }}"
    group: "{{ groupid }}"
    mode: 0750

- name: "shell | Zsh :: custom plugins"
  file:
    path: "{{ homedir }}/.zsh.custom/plugins"
    state: directory
    owner: "{{ userid }}"
    group: "{{ groupid }}"
    mode: 0750

- name: "shell | Zsh :: custom scripts"
  copy:
    src: "{{ item }}.sh"
    dest: "{{ homedir }}/.zsh.custom/{{ item }}.zsh"
    owner: "{{ userid }}"
    group: "{{ groupid }}"
    mode: 0700
  with_items:
    - 000.aliases
    - 005.path
    - 010.kubeconfig

- name: "shell | Zsh :: autosuggestions plugin"
  file:
    src: "{{ homedir }}/{{ dotdir }}/zsh-autosuggestions"
    dest: "{{ homedir }}/.zsh.custom/plugins/zsh-autosuggestions"
    state: link
    owner: "{{ userid }}"
    group: "{{ groupid }}"
    mode: 0750

- name: "shell | Zsh :: syntax-highlighting plugin"
  file:
    src: "{{ homedir }}/{{ dotdir }}/zsh-syntax-highlighting"
    dest: "{{ homedir }}/.zsh.custom/plugins/zsh-syntax-highlighting"
    state: link
    owner: "{{ userid }}"
    group: "{{ groupid }}"
    mode: 0750
